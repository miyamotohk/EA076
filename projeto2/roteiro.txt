Nesse projeto, fizemos uma prova de conceito de um datalogger, isto é, um sistema que realiza medições de dados e os grava em uma memória. Um dispositivo desse tipo pode, por exemplo, ser usado em locais remotos, de modo que os dados gravados possam ser recuperados posteriormente.

O projeto utiliza um Arduino UNO como microcontrolador, um teclado matricial, um sensor de temperatura (LM35), uma memória EEPROM (AT24C16) e um LED azul. Para o desenvolvimento do projeto, utilizamos uma metodologia baseada em testes e verificações.

A seguir, apresentaremos as funcionalidades do nosso sistema.

O datalogger pode se comunicar com o computador através do protocolo RS232 (serial), utilizando a interface do monitor serial do Arduino IDE. Esse protocolo foi utilizado tanto para enviar como receber mensagens relativas às seguintes funcionalidades.

- ao enviar a mensagem PING, o sistema devolve a mensagem PONG
- ao enviar ID, o sistema responde o identificador do datalogger
- MEASURE retorna o valor de uma medicao
- MEMSTATUS indica o numero de elementos na memoria
- RESET reinicializa a memoria
- RECORD mede e grava o valor de um dado na memoria
- GET N retorna o N-esimo elemento da memoria

A outra interface possível para o nosso sistema é o teclado matricial, (cuja leitura é realizada através de uma função de varredura). Os comandos são sempre números iniciados com '#' (cerquilha) e terminados com '*' (estrela).

1 - pisca o LED, indicando que o sistema está responsivo
2 - realiza uma medicao e grava o valor na memoria
3 e 4 ativa e encerra o modo de medicao automatica, respectivamente Nesse modo, o sistema mede e grava um dado com periodo fixado em 5 segundos.

A organizacao dos dados na memoria é padronizada, de forma que a memória pode ser trocada entre os grupos. Os dados, de 8 bits sem sinal, são gravados sequencialmente e a primeira posicao da memoria indica o numeros de registros existente.

Além disso, o sistema usa o conceito de kernel de tempo real nao-preemptivo: no laco principal, a verificacao de cada flag controla a execucao da respectiva acao, (...).

Dessa forma, nosso datalogger pode realizar medidas e gravá-las na memória EEPROM, sendo controlado pelo computador ou pelo teclado matricial.